# Написання простого UDP каналу з мінімальними затримками

Застосунки із розподільчею здатністю в десятках мікросекунд, наприклад HFT

## 1. Вимоги та особливості low latency

min(time) != max(throughput)  =>  low latency != high load

- Цінність повідомлення суттєво знижується із затримкою
- Послідовність доставки опціональна
- Є дозвіл на пропуск повідомлень

Якщо прибрати гарантії доставки та/чи послідовної доставки швидкість
доставки може збільшитись у рази.

### Перешкоди:

- Системний планувальник (wait, park/unpark) (~20-40us)
- Забезпечення гарантій (tcp, транзакції ..) (~100us-1ms)
- Загальні бібліотеки орієнтуються на пропускну способність, не на затримки

### Що допомагає:

- Busy loop
- CPU cache
- Протоколи з мінімальними гарантіями
- Хакі (CPU pin і т ін)

## 2. Задача

Канал зв'язку між розподіленими процесами для швидкої передачі невеликих повідомлень в AWS.

### Вибір технологій

- Мінімально зручний протокол без гарантій - UDP
** Не використовуємо multicast через специфіку multicast в облаці
- Стандартна бібліотека задовільняє
- Цікаво було б поекспериментувати із eBPF, io_uring

## 3. Код

### 3.1. Send via UDP (./examples/send.rs)
### 3.2. Receive via UDP (./examples/receive.rs)
### 3.3. Блокуючий та неблокуючий режим
### 3.4. Вимірювання
### 3.5. Publisher and Subscriber (./examples/publisher.rs) (./examples/subscriber.rs)
